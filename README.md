This's the last time I rewrite code I wrote in Java to C.
